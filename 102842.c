static void sysbus_esp_hard_reset(DeviceState *dev) SysBusESPState * sysbus = ESP ( dev ) ; esp_hard_reset ( & sysbus -> esp ); void esp_hard_reset(ESPState *s) memset ( s -> rregs , 0 , ESP_REGS ); memset ( s -> wregs , 0 , ESP_REGS ); s -> tchi_written = 0; s -> ti_size = 0; s -> ti_rptr = 0; s -> ti_wptr = 0; s -> dma = 0; s -> do_cmd = 0; s -> dma_cb = NULL; s -> rregs [ ESP_CFG1 ] = 7; 