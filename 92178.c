static void scsi_qdev_realize(DeviceState *qdev, Error **errp) SCSIDevice * dev = SCSI_DEVICE ( qdev ) ; SCSIBus * bus = DO_UPCAST ( SCSIBus , qbus , dev -> qdev . parent_bus ) ; SCSIDevice * d ; if ( dev -> channel > bus -> info -> max_channel )  if ( dev -> id != - 1 && dev -> id > bus -> info -> max_target )  if ( dev -> lun != - 1 && dev -> lun > bus -> info -> max_lun )  if ( dev -> id == - 1 )  if ( dev -> lun == - 1 )  d = scsi_device_find ( bus , dev -> channel , dev -> id , dev -> lun ); SCSIDevice *scsi_device_find(SCSIBus *bus, int channel, int id, int lun) BusChild * kid ; SCSIDevice * target_dev = NULL ; DeviceState * qdev = kid -> child ; SCSIDevice * dev = SCSI_DEVICE ( qdev ) ; if ( dev -> channel == channel && dev -> id == id )  if ( dev -> lun == lun )  return dev ; target_dev = dev; return target_dev ; assert ( d ); 