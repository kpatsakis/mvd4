static ssize_t mipsnet_receive(NetClientState *nc, const uint8_t *buf, size_t size) MIPSnetState * s = qemu_get_nic_opaque ( nc ) ; if ( ! mipsnet_can_receive ( nc ) )  static int mipsnet_can_receive(NetClientState *nc) MIPSnetState * s = qemu_get_nic_opaque ( nc ) ; if ( s -> busy )  return 0 ; return ! mipsnet_buffer_full ( s ) ; static int mipsnet_buffer_full(MIPSnetState *s) if ( s -> rx_count >= MAX_ETH_FRAME_SIZE )  return 1 ; return 0 ; s -> busy = 1; memcpy ( s -> rx_buffer , buf , size ); s -> rx_count = size; s -> rx_read = 0; s -> intctl |= MIPSNET_INTCTL_RXDONE; mipsnet_update_irq ( s ); static void mipsnet_update_irq(MIPSnetState *s) int isr = ! ! s -> intctl ; trace_mipsnet_irq ( isr , s -> intctl ); qemu_set_irq ( s -> irq , isr ); 