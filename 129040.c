static void megasas_xfer_complete(SCSIRequest *req, uint32_t len) MegasasCmd * cmd = req -> hba_private ; uint8_t * buf ; uint32_t opcode ; if ( cmd -> frame -> header . frame_cmd != MFI_CMD_DCMD )  buf = scsi_req_get_buf ( req ); opcode = le32_to_cpu ( cmd -> frame -> dcmd . opcode ); if ( opcode == MFI_DCMD_PD_GET_INFO && cmd -> iov_buf )  struct mfi_pd_info * info = cmd -> iov_buf ; if ( info -> inquiry_data [ 0 ] == 0x7f )  memset ( info -> inquiry_data , 0 , sizeof ( info -> inquiry_data ) ); memcpy ( info -> inquiry_data , buf , len ); 