int main(int argc, char *argv[]) MYSQL * conn ; size_t arglen , fmtlen ; char * server = "localhost" ; char * user = "root" ; char * database = "bank" ; char * password ; char * query ; char * fmtString = "SELECT * FROM users WHERE firstname LIKE '%s'" ; if ( argc < 2 )  conn = mysql_init ( NULL ); if ( ! conn )  password = getpass_r ( "DB Password: " ); char * getpass_r(const char *prompt) struct termios oflags , nflags ; char password [ 64 ] = { '\0' } ; if ( tcgetattr ( fileno ( stdin ) , & oflags ) )  return NULL ; nflags = oflags; nflags . c_lflag &= ~ECHO; nflags . c_lflag |= ECHONL; if ( tcsetattr ( fileno ( stdin ) , TCSAFLUSH , & nflags ) )  return NULL ; ret = fgets ( password , sizeof ( password ) , stdin ); if ( tcsetattr ( fileno ( stdin ) , TCSAFLUSH , & oflags ) )  return NULL ; if ( ret )  ret = strdup ( password ); return ret ; if ( ! password )  if ( ! mysql_real_connect ( conn , server , user , password , database , 0 , NULL , 0 ) )  arglen = strlen ( argv [ 1 ] ); fmtlen = strlen ( fmtString ); if ( arglen > SIZE_MAX / sizeof * query - fmtlen )  query = malloc ( ( arglen + fmtlen ) * sizeof * query ); if ( query == NULL )  sprintf ( query , fmtString , argv [ 1 ] ); if ( mysql_query ( conn , query ) )  free ( query ); free ( query ); 