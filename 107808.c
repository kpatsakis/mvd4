void AudioSessionConduit TrackRate AudioChunk& chunk) nsAutoArrayPtr < int16_t > samples ( new int16_t [ chunk . mDuration ] ) ; if ( enabled_ && chunk . mBuffer )  switch ( chunk . mBufferFormat )  memset ( samples , 0 , chunk . mDuration * sizeof ( samples [ 0 ] ) ); if ( samplenum_10ms_ != rate / 100 )  samplenum_10ms_ = rate / 100; samples_10ms_buffer_ = new int16_t [ samplenum_10ms_ ]; buffer_current_ = 0; int64_t chunk_remaining ; int64_t tocpy ; int16_t * samples_tmp = samples . get ( ) ; chunk_remaining = chunk . mDuration; if ( buffer_current_ )  tocpy = std :: min ( chunk_remaining , samplenum_10ms_ - buffer_current_ ); buffer_current_ += tocpy; samples_tmp += tocpy; chunk_remaining -= tocpy; if ( buffer_current_ == samplenum_10ms_ )  tocpy = ( chunk_remaining / samplenum_10ms_ ) * samplenum_10ms_; if ( tocpy > 0 )  samples_tmp += tocpy; chunk_remaining -= tocpy; if ( chunk_remaining )  memcpy ( samples_10ms_buffer_ , samples_tmp , chunk_remaining * sizeof ( int16_t ) ); 