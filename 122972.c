static int manager_skinny_show_devices(struct mansession *s, const struct message *m) const char * a [ ] = { "skinny" , "show" , "devices" } ; _skinny_show_devices ( - 1 , & total , s , m , 3 , a ); static char *_skinny_show_devices(int fd, int *total, struct mansession *s, const struct message *m, int argc, const char *argv[]) const char * id ; char idtext [ 256 ] = "" ; if ( s )  id = astman_get_header ( m , "ActionID" ); if ( ! ast_strlen_zero ( id ) )  snprintf ( idtext , sizeof ( idtext ) , "ActionID: %s\r\n" , id ); astman_append ( s "Event: "Channeltype: "ObjectName: "ChannelObjectType: "DeviceId: "IPaddress: "Type: "Devicestatus: "NumberOfLines: %d\r\n" idtext d -> name d -> id d -> session ? ast_inet_ntoa ( d -> session -> sin . sin_addr ) : "-none-" device2str ( d -> type ) d -> registered ? "registered" : "unregistered" numlines ) 