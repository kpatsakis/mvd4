 nestegg_track_audio_params(nestegg * ctx, unsigned int nestegg_audio_params * params) struct track_entry * entry ; memset ( params , 0 , sizeof ( * params ) ); entry = ne_find_track_entry ( ctx , track ); static struct track_entry ne_find_track_entry(nestegg * ctx, unsigned int track) struct ebml_list_node * node ; unsigned int tracks = 0 ; node = ctx -> segment . tracks . track_entry . head; while ( node )  if ( track == tracks )  return node -> data ; tracks += 1; node = node -> next; return NULL ; if ( ! entry )  if ( nestegg_track_type ( ctx , track ) != NESTEGG_TRACK_AUDIO )   nestegg_track_type(nestegg * ctx, unsigned int track) struct track_entry * entry ; uint64_t type ; entry = ne_find_track_entry ( ctx , track ); static struct track_entry ne_find_track_entry(nestegg * ctx, unsigned int track) struct ebml_list_node * node ; unsigned int tracks = 0 ; node = ctx -> segment . tracks . track_entry . head; while ( node )  if ( track == tracks )  return node -> data ; tracks += 1; node = node -> next; return NULL ; if ( ! entry )  return - 1 ; if ( ne_get_uint ( entry -> type , & type ) != 0 )  static ne_get_uint(struct ebml_type type, uint64_t * value) if ( ! type . read )  return - 1 ; return 0 ; return - 1 ; if ( type & TRACK_TYPE_VIDEO )  return NESTEGG_TRACK_VIDEO ; if ( type & TRACK_TYPE_AUDIO )  return NESTEGG_TRACK_AUDIO ; return - 1 ; params -> rate = 8000; ne_get_float ( entry -> audio . sampling_frequency , & params -> rate ); static ne_get_float(struct ebml_type type, double * value) if ( ! type . read )  assert ( type . type == TYPE_FLOAT ); 