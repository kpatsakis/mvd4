static int fuse_fsync(struct file *file, loff_t start, loff_t int datasync) return fuse_fsync_common ( file , start , end , datasync , 0 ) ; int fuse_fsync_common(struct file *file, loff_t start, loff_t int datasync, int isdir) struct inode * inode = file -> f_mapping -> host ; struct fuse_conn * fc = get_fuse_conn ( inode ) ; struct fuse_fsync_in inarg ; int err ; if ( is_bad_inode ( inode ) )  err = filemap_write_and_wait_range ( inode -> i_mapping , start , end ); if ( err )  err = sync_inode_metadata ( inode , 1 ); if ( err )  if ( ( ! isdir && fc -> no_fsync ) || ( isdir && fc -> no_fsyncdir ) )  memset ( & inarg , 0 , sizeof ( inarg ) ); inarg . fh = ff -> fh; inarg . fsync_flags = datasync ? 1 : 0; args . in . args [ 0 ] . value = & inarg; err = fuse_simple_request ( fc , & args ); if ( err == - ENOSYS )  return err ; 