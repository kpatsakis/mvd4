 nsAttrAndChildArray::InsertChildAt(nsIContent* aChild, uint32_t aPos) uint32_t offset = AttrSlotsSize ( ) ; uint32_t childCount = ChildCount ( ) ; if ( mImpl && offset + childCount < mImpl -> mBufferSize )  if ( offset && ! mImpl -> mBuffer [ offset - ATTRSIZE ] )  if ( ! GrowBy ( 1 ) )  void * * pos = mImpl -> mBuffer + offset + aPos ; if ( childCount != aPos )  memmove ( pos + 1 , pos , ( childCount - aPos ) * sizeof ( nsIContent * ) ); SetChildAtPos ( pos , aChild , aPos , childCount ); 