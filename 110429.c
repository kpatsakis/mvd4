void build_output_lut(struct curveType uint16_t **output_gamma_lut, size_t *output_gamma_lut_length) if ( trc -> type == PARAMETRIC_CURVE_TYPE )  float gamma_table [ 256 ] ; uint16_t i ; uint16_t * output = malloc ( sizeof ( uint16_t ) * 256 ) ; if ( ! output )  for(i = 0; i < 256; i++) output [ i ] = ( uint16_t ) ( gamma_table [ i ] * 65535 ); * output_gamma_lut = output; if ( trc -> count == 0 )  * output_gamma_lut = build_linear_table ( 4096 ); static uint16_t *build_linear_table(int length) uint16_t * output = malloc ( sizeof ( uint16_t ) * length ) ; if ( ! output )  output [ i ] = input; return output ; 