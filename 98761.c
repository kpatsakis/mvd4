static void eepro100_write(void *opaque, hwaddr uint64_t data, unsigned size) EEPRO100State * s = opaque ; switch ( size )  eepro100_write4 ( s , addr , data ); static void eepro100_write4(EEPRO100State * s, uint32_t addr, uint32_t val) switch ( addr )  eepro100_write_port ( s ); static void eepro100_write_port(EEPRO100State *s) uint32_t val = e100_read_reg4 ( s , SCBPort ) ; uint8_t selection = ( val & PORT_SELECTION_MASK ) ; switch ( selection )  nic_selective_reset ( s ); static void nic_selective_reset(EEPRO100State * s) uint16_t * eeprom_contents = eeprom93xx_data ( s -> eeprom ) ; memcpy ( eeprom_contents , s -> conf . macaddr . a , 6 ); eeprom_contents [ EEPROM_ID ] = EEPROM_ID_VALID; eeprom_contents [ 5 ] = 0x0100; eeprom_contents [ EEPROM_PHY_ID ] = 1; sum += eeprom_contents [ i ]; eeprom_contents [ EEPROM_SIZE - 1 ] = 0xbaba - sum; TRACE ( EEPROM , logout ( "checksum=0x%04x\n" , eeprom_contents [ EEPROM_SIZE - 1 ] ) ); 