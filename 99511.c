void fw_cfg_add_string(FWCfgState *s, uint16_t key, const char *value) size_t sz = strlen ( value ) + 1 ; fw_cfg_add_bytes ( s , key , g_memdup ( value , sz ) , sz ); void fw_cfg_add_bytes(FWCfgState *s, uint16_t key, void *data, size_t len) fw_cfg_add_bytes_read_callback ( s , key , NULL , NULL , data , len ); static void fw_cfg_add_bytes_read_callback(FWCfgState *s, uint16_t FWCfgReadCallback void void *data, size_t len) int arch = ! ! ( key & FW_CFG_ARCH_LOCAL ) ; key &= FW_CFG_ENTRY_MASK; assert ( key < FW_CFG_MAX_ENTRY && len < UINT32_MAX ); s -> entries [ arch ] [ key ] . data = data; s -> entries [ arch ] [ key ] . len = ( uint32_t ) len; s -> entries [ arch ] [ key ] . read_callback = callback; s -> entries [ arch ] [ key ] . callback_opaque = callback_opaque; 