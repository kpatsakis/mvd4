 AnimationFrame::ReadPngFrame(int outputFormat) png_structp pngread = png_create_read_struct ( PNG_LIBPNG_VER_STRING , nullptr , nullptr , nullptr ) ; if ( ! pngread )  png_infop pnginfo = png_create_info_struct ( pngread ) ; if ( ! pnginfo )  if ( setjmp ( png_jmpbuf ( pngread ) ) )  width = png_get_image_width ( pngread , pnginfo ); height = png_get_image_height ( pngread , pnginfo ); switch ( outputFormat )  bytepp = 4; bytepp = 3; bytepp = 2; buf = ( char * ) malloc ( width * ( height + 1 ) * bytepp ); rows [ i ] = buf + ( stride * i ); rows [ height ] = nullptr; png_read_image ( pngread , ( png_bytepp ) & rows . front ( ) ); 